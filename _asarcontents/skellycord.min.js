(()=>{var re=Object.defineProperty;var Lt=Object.getOwnPropertyDescriptor;var vt=Object.getOwnPropertyNames;var At=Object.prototype.hasOwnProperty;var r=(e,t)=>re(e,"name",{value:t,configurable:!0});var b=(e,t)=>()=>(e&&(t=e(e=0)),t);var f=(e,t)=>{for(var o in t)re(e,o,{get:t[o],enumerable:!0})},Dt=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of vt(t))!At.call(e,s)&&s!==o&&re(e,s,{get:()=>t[s],enumerable:!(n=Lt(t,s))||n.enumerable});return e};var jt=e=>Dt(re({},"__esModule",{value:!0}),e);function W(e){let t=document.createElement("style");return t.id="_skellycord-css",t.textContent=/http(s?):\/\//.test(e)?`@import url(${e});`:e,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>document.body.appendChild(t)):document.body.appendChild(t),{edit:o=>t.textContent=o.startsWith("http")&&/http(s?):\/\//.test(o)?`@import url(${o});`:o,revert:()=>t.remove()}}var st=b(()=>{r(W,"default")});function Vt(...e){let t={logNames:e,colors:{log:"blue",warn:"gold",error:"red"},log:(...o)=>console.log(...U("log",e,t.colors),...o),warn:(...o)=>console.warn(...U("warn",e,t.colors),...o),error:(...o)=>console.error(...U("error",e,t.colors),...o),group:(...o)=>console.group(...U("log",e,t.colors),...o),groupCollapsed:(...o)=>console.groupCollapsed(...U("log",e,t.colors),...o)};return t}function U(e,t,o){return["%c"+t.map(n=>`[${n}]`).join(" "),`font-weight:bold;color:${o[e]}`]}var l,it=b(()=>{r(Vt,"createLogger");r(U,"makeLogNames");l=Vt("Skellycord")});var de={};f(de,{CORE_STORE:()=>fe,CORE_STORE_LINK:()=>$,GITHUB:()=>ne,GITHUB_REPO:()=>$t,GUILD_DATA:()=>Gt,IS_DESKTOP:()=>q,IS_FLATPAK:()=>Wt,LAST_COMMIT:()=>se,MOD_SETTINGS:()=>R,MOD_STORAGE_KEY:()=>x,MOD_VERSION:()=>Ut,RELEASE_STATE:()=>qt,TEMP_CORE_SETTINGS:()=>ue,TEMP_CORE_STORAGE_KEY:()=>I,TempStoreRunType:()=>me});var fe,ne,$t,Gt,me,x,R,I,ue,$,q,Wt,Ut,qt,se,L=b(()=>{fe="SkellyStore",ne="skellycord/skellycord",$t=`https://github.com/${ne}/`,Gt={id:"1207058659037683812",invite:"aW3We2VKna"},me=(o=>(o[o.TEMPORARY=0]="TEMPORARY",o[o.PERMANENT=1]="PERMANENT",o))(me||{}),x="SkellycordInternal",R={firstStart:!0,quickcss:"",storeLinks:[],stores:{},webThemes:"",localThemes:[]},I="SkellycordTempCore",ue={link:null,loadType:0,hasLoaded:!1},$="https://store.skellycord.rocks/",q=window?.DiscordNative!=null,Wt=q&&!window?.SkellycordNative,Ut="0.1.3",qt="nightly",se="f08bafffbb601b4f58b8ad64052b94640c142502"});async function P(e=1){return await new Promise(t=>setTimeout(t,e))}var ie=b(()=>{r(P,"sleep")});async function H(e){let t=document.createElement("input");t.type="file",t.accept=e,t.click();let o;for(t.addEventListener("change",async()=>{o=t.files});!o;)await P();return o}var ge=b(()=>{ie();r(H,"default")});var xe={};f(xe,{clearData:()=>Ft,exportData:()=>Bt,importData:()=>Ht});async function Ht(){let e=await H("application/json"),t=JSON.parse(await e[0].text());for(let o of Object.keys(t))o!==x&&o!==I&&!o.startsWith("SkellyPlugin_")||localStorage.setItem(o,t[o])}function Bt(){let e={};for(let o=0;o<localStorage.length;o++){let n=localStorage.key(o);n!==x&&n!==I&&!n.startsWith("SkellyPlugin_")||(e[n]=localStorage.getItem(n))}let t=document.createElement("a");t.href="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),t.download="skellycord_backup.json",t.click(),t.remove()}function Ft(){for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);t!==x&&t!==I&&!t.startsWith("SkellyPlugin_")||localStorage.removeItem(t)}}var at=b(()=>{L();ge();r(Ht,"importData");r(Bt,"exportData");r(Ft,"clearData")});var he={};f(he,{backup:()=>xe,openStorage:()=>w});function w(e,t=void 0){let o=`${e===x?"":"SkellyPlugin_"}${e}`,n=[];if(ye?.[o])return ye[o];let s=localStorage.getItem(o);s?s=JSON.parse(s):s=t??{};let c=new Proxy(s,{get(a,m){return m==="_onChange"?g=>n.push(g):a[m]},set(a,m,g){let p=a[m];a[m]=g,localStorage.setItem(o,JSON.stringify(a));for(let M of n)M(m,g,p);return!0}});return ye[o]=c,c}var ye,ae=b(()=>{L();at();ye={};r(w,"openStorage")});function Se(...e){return e.join(" ")}var lt=b(()=>{r(Se,"default")});var Ee={};f(Ee,{after:()=>Yt,before:()=>Kt,instead:()=>zt});function Te({type:e,obj:t,target:o,patchFn:n}){if(!t||!t[o])throw new TypeError(`${o} is undefined!`);let s=t[o][ct];if(t[o][ct])s[e].push(n);else{let c=Object.freeze(t[o]);s={before:[],instead:[],after:[],og:c},s[e].push(n);let a=Object.getOwnPropertyDescriptor(t,o);if(a&&a.get)try{Object.defineProperty(t,o,{configurable:!0,enumerable:!0,...a,get:()=>be(s),set:m=>s.og=m})}catch(m){l.error("Couldn't patch module",m)}else t[o]=be(s);Object.defineProperties(t[o],Object.getOwnPropertyDescriptors(c)),t[o].toString=c.toString}return()=>{s[e].splice(s[e].findIndex(n),1),s.after.length+s.before.length+s.instead.length==0?Object.defineProperty(t,o,{value:s.og,writable:!0,configurable:!0}):Object.defineProperty(t,o,{get:()=>be(s),writable:!0,configurable:!0})}}function be(e){return function(){let t=arguments,o,n;for(let s of e.before)try{s.call(this,t,this)}catch{}for(let s of e.instead)try{o=s.call(this,t,e.og,this)}catch(c){n=c}if(!e.instead.length)try{o=e.og.call(this,...t)}catch(s){n=s}for(let s of e.after){let c=s.call(this,t,o,this);c!==void 0&&(o=c)}if(n)throw n;return o}}function Kt(e,t,o){return Te({type:"before",obj:e,target:t,patchFn:o})}function zt(e,t,o){return Te({type:"instead",obj:e,target:t,patchFn:o})}function Yt(e,t,o){return Te({type:"after",obj:e,target:t,patchFn:o})}var ct,pt=b(()=>{E();ct="skellycord.patches";r(Te,"_patchTarget");r(be,"_replaceFunc");r(Kt,"before");r(zt,"instead");r(Yt,"after")});async function k(e,t){let o=new XMLHttpRequest,n;for(o.open(e,t),o.onload=()=>n=o.response,o.send();!n;)await P();return n}var ft=b(()=>{ie();r(k,"default")});var le={};f(le,{constants:()=>de,injectCss:()=>W,joinClassNames:()=>Se,logger:()=>l,patcher:()=>Ee,quickXHR:()=>k,sleep:()=>P,storage:()=>he});var E=b(()=>{st();it();ae();L();lt();pt();ie();ft()});var rt={};f(rt,{apis:()=>ot,utils:()=>le,webpack:()=>ce});E();var _e={};f(_e,{onReady:()=>eo,overridePush:()=>we,sourceBits:()=>_,wpName:()=>T,wpRequire:()=>y});E();var F={};f(F,{INTERNAL_PLUGIN:()=>h,SettingsTypes:()=>gt,definePlugin:()=>Zt,fetchStore:()=>dt,init:()=>Jt,load:()=>ut,loadStore:()=>Qt,loaded:()=>v,stores:()=>mt,unload:()=>Xt});ae();L();E();var v={},mt={},B,h;async function Jt(){B=w(x,R);let e=w(I,ue);if(e.link)switch(e.loadType){case 1:h=e.link,l.log(`Custom core store active: ${h}`);break;case 0:e.hasLoaded?(e.link=null,e.hasLoaded=!1,h=$):(h=e.link??$,e.hasLoaded=h!==$,e.hasLoaded&&l.log(`Custom core store active: ${h}`))}else h=$;for(let t of[h,...B.storeLinks])try{dt(t)}catch(o){t===h&&l.warn(`Core plugin store (${h}) failed to load, skellycord frontend/settings cannot be shown.`),l.error(`Plugin store "${t}" failed to load`,o.stack)}}r(Jt,"init");function ut(e){if(!(!e||!e.name||v[e.name]))try{e?.start?.(),v[e.name]=e,console.log(`${e.name} successfully started.`)}catch(t){console.error(`${e.name} failed to start: ${t}`)}}r(ut,"load");function Xt(e){let t=v[e];if(t){try{t?.stop?.(),l.log("Successfully stopped.")}catch(o){l.error(`Failed to stop: ${o}`)}delete v[t.name]}}r(Xt,"unload");async function dt(e){e.endsWith("/")||(e+="/");let t,o,n=Date.now();try{t=await k("GET",e+"manifest.json"),o=await k("GET",e+"store.js")}catch(a){l.error("Could not load store:",a);return}let s=JSON.parse(t),c=o;l.log(`Retreived plugin code in ${Date.now()-n}ms`),l.groupCollapsed(`Running plugin store ${s.name}...`);try{(0,eval)(`const Manifest=${t};${c}//# sourceURL=${e}store.js`);let a=B.storeLinks;e!==h&&!a.includes(e)&&a.push(e),B.storeLinks=a}catch(a){l.error(`Plugin store ${s.name} failed to load`,a)}console.groupEnd()}r(dt,"fetchStore");function Qt(e,t){e.plugins=t,mt[e.name]=e;let o=B.stores;o[e.name]||(o[e.name]={});for(let n of Object.keys(t))t[n]?.default&&(t[n]=t[n].default),typeof o[e.name][n]!="boolean"&&(o[e.name][n]=e.name===fe),t[n].from=e.name,o[e.name][n]&&ut(t[n])}r(Qt,"loadStore");function Zt(e){return e}r(Zt,"definePlugin");var gt=(n=>(n[n.STRING=0]="STRING",n[n.NUMBER=1]="NUMBER",n[n.BOOLEAN=2]="BOOLEAN",n))(gt||{});var xt,y,T="webpackChunkdiscord_app",_={},Oe;function we(){if(window[T])for(let e of window[T])e[0][1]!==-1&&Pe(e);xt=window[T].push,Object.defineProperty(window[T],"push",{get:()=>e=>yt(e,xt),set:e=>{Object.defineProperty(window[T],"push",{value:t=>yt(t,e),configurable:!0,writable:!0})},configurable:!0})}r(we,"overridePush");function yt(e,t){e[0][1]!==-1&&Pe(e),y&&Pe(y.m,!0),Reflect.apply(t,window[T],[e])}r(yt,"fakePush");function Pe(e,t=!1){let o,n;t?(o=[],n=e):(o=e[0],n=e[1]),o.push(-1);for(let s in n){let c=Object.freeze(n[s]);n[s]=function(a,m,g){y||(y=g,y&&l.log("retrieved wpRequire")),a.exports===window&&Object.defineProperty(g.c,s,{value:g.c[s],enumerable:!1,configurable:!0}),c?.toString||l.warn(`Webpack Module ${s} is not a function!`,c);let p=c.toString().replaceAll(`
`,"");if(p.includes("retrieved wpRequire")){Reflect.apply(c,null,[a,m,g]);return}_[s]=p;let M=[];for(let O of Object.values(v))if(O.patches)for(let N=0;N<Object.values(O.patches).length;N++){let u=Object.values(O.patches)[N];if(!(!(u.find instanceof RegExp?u.find.test(p):p.includes(u.find))&&(!u.predicate||u.predicate&&u.predicate(a))))for(let Nt in u.replacements){let te=u.replacements[Nt],nt=0,pe;switch(typeof te.replacement){case"string":pe=te.replacement;break;case"function":pe=te.replacement(a,m)}let oe=p.replace(te.target,pe.replaceAll("$self",`window.skellycord.apis.plugins.loaded["${O.name}"]`));if(p!==oe)try{(0,eval)("0,"+oe),nt++,p=oe,l.log(`Patch${N} completed on WebpackModule${s} [${O.from} - ${O.name}]`),console.log(`Patch${N}
Comparisons:`,{matches:u.find instanceof RegExp?u.find.test(p):p.includes(u.find),find:u.find,code:p})}catch(It){l.groupCollapsed(`Patch${N} on WebpackModule${s} failed [${O.from} - ${O.name}]`),console.log(`Patch${N}
Comparisons:`,{matches:u.find instanceof RegExp?u.find.test(p):p.includes(u.find),find:u.find,code:c}),console.log("Final Code:",{_:oe}),console.error(It.stack),console.groupEnd();continue}nt&&M.push(O.name)}}p="0,"+p.replaceAll(`
`,"");let Ct=M.length?`Patched By: ${M.join(", ")}`:"No Patches :(",Mt=(0,eval)(`/*
* Webpack Module ${s}
*
* ${Ct}
*/
${p}
//# sourceURL=WebpackModule${s}`);Reflect.apply(Mt,null,[a,m,g]),n[s].toString=c.toString}}}r(Pe,"patchChunk");function eo(e){Oe=Oe??[],Oe.push(e)}r(eo,"onReady");function Re(){let e=document.createElement("frame");e.src="about:blank",document.head.appendChild(e);let t=Object.getOwnPropertyDescriptor(e.contentWindow,"localStorage");Object.defineProperty(window,"localStorage",t),e.remove()}r(Re,"default");var ht=[Re];var ot={};f(ot,{plugins:()=>F,themes:()=>Y,toaster:()=>ee,updater:()=>Ce});var Y={};f(Y,{fetchLocalThemes:()=>ro,init:()=>oo,linkThemes:()=>K,pathThemes:()=>z,reloadQuickCss:()=>Tt,reloadWebThemes:()=>bt,reloadlocalThemes:()=>St});E();L();ge();ae();var to=W(""),K=[],z=[];function oo(){bt(),Tt(),St()}r(oo,"init");async function ro(){if(!q)return;let e=w(x,R),{localThemes:t}=e,o=await H("text/css");for(let n of Object.values(o)){let s=n.path;t.includes(s)||t.push(s)}e.localThemes=t}r(ro,"fetchLocalThemes");async function St(){if(!q)return;for(let t of z)t.element.remove();z.splice(0,z.length);let e=w(x,R);for(let t of e.localThemes){if(!window.SkellycordNative.fileExists(t))continue;let o=document.createElement("style");o.innerHTML=await window.SkellycordNative.readFile(t);let n={path:t,element:o};document.body.appendChild(o),z.push(n)}}r(St,"reloadlocalThemes");function bt(){let e=w(x,R);for(let t of K)t.element.remove();K.splice(0,K.length);for(let t of e.webThemes.split(`
`)){if(t===""||t===" ")continue;let o=document.createElement("link");o.id="_skellycord_theme",o.href=t,o.rel="stylesheet";let n={url:t,element:o};document.body.appendChild(o),K.push(n)}}r(bt,"reloadWebThemes");function Tt(){let e=w(x,R);to.edit(e.quickcss)}r(Tt,"reloadQuickCss");var Ce={};f(Ce,{LAST_COMMITS:()=>ke,findCommitPoint:()=>Ot,getModCommits:()=>Et,modNeedsToUpdate:()=>so});E();L();var ke=[];async function no(){let t=r(async()=>ke=await Et(),"update");t().then(()=>setInterval(t,9e5))}r(no,"initUpdateLoop");async function Et(){let e=await k("GET",`https://api.github.com/repos/${ne}/commits`);return JSON.parse(e)}r(Et,"getModCommits");function Ot(){return ke.findIndex(e=>e.sha===se)}r(Ot,"findCommitPoint");function so(){return Ot()!=0}r(so,"modNeedsToUpdate");se?no():l.warn("No commit associated with instance, commits will not be fetched.");var ee={};f(ee,{init:()=>So,makeToast:()=>bo});var Ie={};f(Ie,{React:()=>S,ReactDOM:()=>Q,css:()=>Ge,megaModule:()=>Z,miniReact:()=>Le,stores:()=>ze,utils:()=>Ze});var Ne={};f(Ne,{getModule:()=>X,getViaDisplayName:()=>ho,getViaProps:()=>i,getViaPrototypes:()=>yo,getViaStoreName:()=>d});E();var ce={};f(ce,{all:()=>Me,common:()=>Ie,filters:()=>G,getModule:()=>C,getViaDisplayName:()=>mo,getViaProps:()=>go,getViaPrototypes:()=>xo,getViaSource:()=>fo,getViaStoreName:()=>uo,lazy:()=>Ne,utils:()=>_e});var G={};f(G,{byDisplayName:()=>j,byProps:()=>A,byPrototypes:()=>D,bySourceCode:()=>io,byStoreName:()=>V});function A(...e){return t=>{let o=0;for(let n of e)t?.[n]&&o++;return o===e.length}}r(A,"byProps");function D(...e){return t=>{let o=0;for(let n of e)t?.prototype?.[n]&&o++;return o===e.length}}r(D,"byPrototypes");function io(e){for(let t of Object.keys(_))if(e.test(_[t]))return t}r(io,"bySourceCode");function j(e){return t=>t?.displayName&&t?.displayName==e}r(j,"byDisplayName");function V(e){return t=>t?._dispatchToken&&t?.getName?.()==e}r(V,"byStoreName");var Me={};f(Me,{getModules:()=>J,getViaDisplayName:()=>co,getViaProps:()=>ao,getViaPrototypes:()=>lo,getViaStoreName:()=>po});function J(e,t=!1){let o=[];for(let n of Object.values(y.c))if(!(!n||!n.exports)){if(e(n)){o.push(n);continue}if(e(n.exports)){o.push(t?n:n.exports);continue}e(n.exports?.default)&&o.push(t?n:n.exports?.default)}return o}r(J,"getModules");function ao(...e){return J(A(...e))}r(ao,"getViaProps");function lo(...e){return J(D(...e))}r(lo,"getViaPrototypes");function co(e){return J(j(e))}r(co,"getViaDisplayName");function po(e){return J(V(e))}r(po,"getViaStoreName");function C(e,t=!1){for(let o of Object.values(y.c))if(!(!o||!o.exports)){if(e(o))return o;if(e(o.exports))return t?o:o.exports;if(e(o.exports?.default))return t?o:o.exports?.default}}r(C,"getModule");function fo(e){for(let t of Object.keys(_))if(e instanceof RegExp?e.test(_[t]):e.includes(_[t]))return y.c[t].exports}r(fo,"getViaSource");function mo(e){return C(j(e))}r(mo,"getViaDisplayName");function uo(e){return C(V(e))}r(uo,"getViaStoreName");function go(...e){return C(A(...e))}r(go,"getViaProps");function xo(...e){return C(D(...e))}r(xo,"getViaPrototypes");async function X(e,t=!1){for(;!window[T]||!y?.c||!C(e);)await P();return C(e,t)}r(X,"getModule");async function i(...e){return X(A(...e))}r(i,"getViaProps");async function yo(...e){return X(D(...e))}r(yo,"getViaPrototypes");async function ho(e){return X(j(e))}r(ho,"getViaDisplayName");async function d(e){return X(V(e))}r(d,"getViaStoreName");var Le;i("jsx","jsxs").then(e=>window._react=Le=e);var S;i("createElement","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED").then(e=>S=e);var Q;i("createPortal","findDOMNode","hydrate").then(e=>Q=e);var Z;i("Button","Card","Modal","FormSwitch").then(e=>Z=e);var Ge={};f(Ge,{colors:()=>$e,flexClasses:()=>Ae,fontSizes:()=>je,fontVariants:()=>De,margins:()=>ve,variables:()=>Ve});var ve;i("marginReset","marginCenterHorz").then(e=>ve=e);var Ae;i("noWrap","flex","flexCenter").then(e=>Ae=e);var De;i("defaultColor","h1","disabled").then(e=>De=e);var je;i("size10","size12").then(e=>je=e);var Ve,$e;i("INTERACTIVE_NORMAL","TEXT_MUTED").then(e=>Ve=e);i("RED_500","TEAL_500").then(e=>$e=e);var ze={};f(ze,{ChannelStore:()=>Ue,GuildMemberStore:()=>Ke,GuildStore:()=>qe,MessageStore:()=>Fe,SelectedChannelStore:()=>He,SelectedGuildStore:()=>Be,UserStore:()=>We});var We;d("UserStore").then(e=>We=e);var Ue;d("ChannelStore").then(e=>Ue=e);var qe;d("GuildStore").then(e=>qe=e);var He;d("SelectedChannelStore").then(e=>He=e);var Be;d("SelectedGuildStore").then(e=>Be=e);var Fe;d("MessageStore").then(e=>Fe=e);var Ke;d("GuildMemberStore").then(e=>Ke=e);var Ze={};f(Ze,{FluxDispatcher:()=>Je,constants:()=>Xe,images:()=>Qe,messages:()=>Ye});var Ye;i("sendMessage","editMessage").then(e=>Ye=e);var Je;i("createToken","subscribe").then(e=>Je=e);var Xe;i("ACTIVITY_PLATFORM_TYPES","AnalyticsGameOpenTypes").then(e=>Xe=e);var Qe;i("getGuildMemberAvatarURL").then(e=>Qe=e);var et=!1;function tt({id:e,title:t,description:o="",img:n="",onClick:s,duration:c=5e3}){et=!0;let{Text:a}=Z,[m,g]=S.useState(!1);S.useEffect(()=>{setTimeout(()=>g(!0),15),setTimeout(()=>{g(!1),document.body.querySelector(`#skellycord-toast-${e}`)?.remove?.(),et=!1},c)},[]);let p={marginLeft:n!==""?"55px":"10px"};return S.createElement("div",{id:`skellycord-toast-${e}`,className:"SCToaster",style:{opacity:m?1:0},onClick:M=>{setTimeout(()=>{M?.currentTarget?.remove(),et=!1},1e3),m&&s?.(),g(!1)}},n?S.createElement("img",{src:n}):null,S.createElement(a,{style:p,variant:"text-md/semibold",className:"text title"},t),o?S.createElement(a,{style:p,variant:"text-sm/normal",className:"text"},o):null)}r(tt,"Toast");var Pt=(E(),jt(le)).injectCss("#_skellycord-toaster-space {    position: relative;    display: contents;}.SCToaster {    transition: 0.5s;    width: 270px;    height: 65px;    position: absolute;    background-color: var(--background-tertiary);    border-radius: 4px;    margin-bottom: 10px;    z-index: 999;    top: 10px;    right: 10px;    /*border-bottom: solid 5px;    border-bottom-color: #2d4ca0;*/    box-shadow: 3px 4px 9px rgb(0 0 0 / 25%);    :hover {        cursor: pointer;    }        .title {        margin-top: 4px;    }    img {        max-width: 35px;        max-height: 35px;        border-radius: 4px;        top: 15px;        left: 10px;        position: absolute;    }}");var _t="_skellycord-toaster-space",wt=0;function So(){let e=document.createElement("div");e.id=_t,e.className="SCToaster",console.log(Pt),document.body.querySelector("#app-mount").insertAdjacentElement("afterend",e)}r(So,"init");async function bo(e){let t={id:wt,queuedAt:Date.now(),...e};wt++,Q.createRoot(document.getElementById(_t)).render(S.createElement(tt,t))}r(bo,"makeToast");E();function Rt(){for(let e of ht)e();F.init(),Y.init(),ee.init()}r(Rt,"preInit");document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Rt):Rt();window.skellycord=Object.freeze(rt);async function kt(){if(!window[T]){new Promise(()=>setTimeout(kt,1));return}l.log("patching webpack..."),we()}r(kt,"initMod");l.log("waiting for webpack...");kt();})();
